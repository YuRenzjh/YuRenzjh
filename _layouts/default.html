<!-- ğŸ“ æ­¤æ–‡ä»¶ç”± GitHub Agent ç”Ÿæˆï¼Œç”¨äºé»˜è®¤å¸ƒå±€æ¨¡æ¿ï¼Œè¯·å‹¿æ‰‹åŠ¨ä¿®æ”¹ç»“æ„ -->
<!DOCTYPE html>
<html lang="{{ site.locale | default: 'zh-CN' }}">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  
  <title>{% if page.title %}{{ page.title }} | {{ site.title }}{% else %}{{ site.title }}{% endif %}</title>
  <meta name="description" content="{{ page.description | default: site.description | strip_html | truncate: 160 }}">
  
  <!-- é¢„åŠ è½½å…³é”®èµ„æº -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  
  <!-- æ ·å¼è¡¨ -->
  <link rel="stylesheet" href="{{ '/assets/css/main.css' | relative_url }}">
  
  <!-- SEO æ ‡ç­¾ -->
  {% seo %}
  
  <!-- RSS Feed -->
  {% feed_meta %}
  
  <!-- Favicon -->
  <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸ’™</text></svg>">
  
  <!-- é˜²æ­¢æš—è‰²æ¨¡å¼é—ªçƒ -->
  <script>
    (function() {
      const theme = localStorage.getItem('theme');
      if (theme) {
        document.documentElement.setAttribute('data-theme', theme);
      }
    })();
  </script>
</head>
<body>
  {% include header.html %}
  
  <main class="site-content">
    {{ content }}
  </main>
  
  {% include footer.html %}
  
  <!-- æš—è‰²æ¨¡å¼åˆ‡æ¢æŒ‰é’® -->
  <button class="theme-toggle" id="theme-toggle" aria-label="åˆ‡æ¢æš—è‰²æ¨¡å¼">
    <span class="icon-sun">â˜€ï¸</span>
    <span class="icon-moon">ğŸŒ™</span>
  </button>
  
  <!-- ä¸»é¢˜åˆ‡æ¢è„šæœ¬ -->
  <script>
    (function() {
      const toggle = document.getElementById('theme-toggle');
      const html = document.documentElement;
      
      // è·å–å½“å‰ä¸»é¢˜
      function getTheme() {
        return localStorage.getItem('theme') || 
          (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
      }
      
      // è®¾ç½®ä¸»é¢˜
      function setTheme(theme) {
        html.classList.add('no-transition');
        html.setAttribute('data-theme', theme);
        localStorage.setItem('theme', theme);
        requestAnimationFrame(() => {
          requestAnimationFrame(() => {
            html.classList.remove('no-transition');
          });
        });
      }
      
      // åˆ‡æ¢ä¸»é¢˜
      toggle.addEventListener('click', () => {
        const current = html.getAttribute('data-theme') || getTheme();
        setTheme(current === 'dark' ? 'light' : 'dark');
      });
      
      // ç›‘å¬ç³»ç»Ÿä¸»é¢˜å˜åŒ–
      window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', (e) => {
        if (!localStorage.getItem('theme')) {
          html.setAttribute('data-theme', e.matches ? 'dark' : 'light');
        }
      });
      
      // å¯¼èˆªæ æ»šåŠ¨æ•ˆæœ
      const header = document.querySelector('.site-header');
      let lastScroll = 0;
      
      window.addEventListener('scroll', () => {
        const currentScroll = window.pageYOffset;
        if (currentScroll > 50) {
          header.classList.add('scrolled');
        } else {
          header.classList.remove('scrolled');
        }
        lastScroll = currentScroll;
      });
      
      // ç§»åŠ¨ç«¯å¯¼èˆªèœå•
      const navToggle = document.querySelector('.nav-toggle');
      const navMenu = document.querySelector('.nav-menu');
      
      if (navToggle && navMenu) {
        navToggle.addEventListener('click', () => {
          navMenu.classList.toggle('active');
        });
      }
    })();
  </script>
</body>
</html>
